[
    {
      "action-only": {
        "name": "Verify MacOS Installation Instructions",
        "on": {
          "schedule": {
            "cron": "'30 12 * * 1' #  This is every Monday at 5:30am PST/8:30am EST"
          }
        },
        "jobs": {
          "build": {
            "runs-on": "macos-latest",
            "steps": [
              {
                "name": "Checkout dockstore/docktore",
                "uses": "actions/checkout@v3",
                "with": {
                  "repository": "dockstore/dockstore",
                  "path": "dockstore"
                }
              },
              {
                "name": "Checkout dockstore/docktore-ui2",
                "uses": "actions/checkout@v3",
                "with": {
                  "repository": "dockstore/dockstore-ui2",
                  "path": "dockstore-ui2"
                }
              },
              {
                "name": "Setup Java",
                "uses": "actions/setup-java@v3",
                "with": {
                  "distribution": "'temurin'",
                  "java-version": "17"
                }
              }
            ]
          }
        }
      }

    },
    {
      "text": "## Setting up a Mac for Dockstore development"
    },
    {
      "text": "Install Docker (Be sure to click on 'Mac with Apple chip' if you have Apple silicon)"
    },
    {
      "text": "https://docs.docker.com/desktop/mac/install/\n"
    },
    {
      "text": "Install Brew"
    },
    {
      "text": "https://brew.sh/"
    },
    {
      "code": {
        "displayBoth": "/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"",
        "directory": "dockstore"
      }
    },
    {
      "text": "\nRun 'git' to trigger the install of Xcode or the Command Line Tools which will install and or update git"
    },
    {
      "text": "https://developer.apple.com/forums/thread/672087?answerId=659036022#659036022"
    },
    {
      "code": {
        "displayBoth": "git",
        "directory": "dockstore",
        "continue-on-error": "true"
      }
    },
    {
      "text": "_If that doesn't work install git manually https://git-scm.com/download/mac)_\n\n"
    },
    {
      "text": "Setup git user information"
    },
    {
      "code": {
        "displayBoth": "git config --global user.email \"you@example.com\"\ngit config --global user.name \"Your Name\"",
        "directory": "dockstore"
      }
    },
    {
      "text": "[Read about git token requirements](https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/)\n"
    },
    {
      "text": "[Setup personal access token for git CLI](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)\n"
    },
    {
      "text": "[It's helpful to cache your git personal access token](https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git)\n"
    },
    {
      "text": "Install Hubflow"
    },
    {
      "text": "https://datasift.github.io/gitflow/TheHubFlowTools.html"
    },
    {
      "code": {
        "displayBoth": "git clone https://github.com/datasift/gitflow\ncd gitflow\nsudo ./install.sh",
        "directory": "dockstore"
      }
    },
    {
      "text": "\nInstall JDK 17"
    },
    {
      "text": "https://formulae.brew.sh/formula/openjdk@17"
    },
    {
      "code": {
        "displayBoth": "curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash",
        "directory": "dockstore"
      }
    },
    {
      "text": "Install git secrets"
    },
    {
      "text": "https://github.com/awslabs/git-secrets"
    },
    {
      "code": {
        "displayBoth": "brew install git-secrets",
        "directory": "dockstore"
      }
    },
    {
      "text": "Install wget"
    },
    {
      "code": {
        "displayBoth": "brew install wget",
        "directory": "dockstore"
      }
    },
    {
      "text": "\nInstall jq"
    },
    {
      "text": "#### Build the webservice"
    },
    {
      "text": "(cd to where you cloned the dockstore/dockstore repo)"
    },
    {
      "code": {
        "displayBoth": "./mvnw clean install",
        "directory": "dockstore"
      }
    },
    {
      "text": "#### Build the UI"
    },
    {
      "text": "(cd to where you cloned the dockstore/dockstore-ui2 repo)\n"
    },
    {
      "text": "Set up UI requirements"
    },
    {
      "text": "NOTE: You must use the --legacy-peer-deps switch due to using npm version 8.11.0 (> npm 6)"
    },
    {
      "text": "for reasons mentioned in [this post](https://stackoverflow.com/questions/66239691/what-does-npm-install-legacy-peer-deps-do-exactly-when-is-it-recommended-wh)"
    },
    {
      "code": {
        "displayBoth": "npm ci --legacy-peer-deps",
        "directory": "dockstore-ui2"
      }
    },
    {
      "text": "Run prebuild"
    },
    {
      "code": {
        "displayBoth": "npm run prebuild",
        "directory": "dockstore-ui2"
      }
    },
    {
      "text": "\nRun build"
    },
    {
      "code": {
        "displayBoth": "npm run build",
        "directory": "dockstore"
      }
    },
    {
      "text": "#### Optional\n"
    },
    {
      "text": "Install IntelliJ _(if on Apple Silicon, select the .dmg (Apple Silicon), otherwise select .dmg(Intel)_\n"
    },
    {
      "text": "https://www.jetbrains.com/idea/download/#section=mac"
    },
    {
      "text": "Add the Scala plugin to IntelliJ\n\n\n\n"
    },
    {
      "text": "https://www.jetbrains.com/help/idea/managing-plugins.html"
    }
]
